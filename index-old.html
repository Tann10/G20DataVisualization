<html>
    <head>
     <!-- <script type="text/javascript" src="/Style Library/Portal/js/jquery-3.4.1.min.js"></script> -->
	 <!-- <script type="text/javascript" src="/Style Library/Portal/js/utils.js"></script> -->
	 <!-- <script type="text/javascript" src="/Style Library/G20/js/custom.js"></script> -->
	 <script type="text/javascript" async="true" src="https://www.googletagmanager.com/gtag/js?id=UA-149608528-2"></script>
     <script type="text/javascript"></script>            
     <script async src="https://www.googletagmanager.com/gtag/js?id=UA-155266180-1"></script>
<!-- <script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-155266180-1');

</script> -->

		<!-- <script type="text/javascript">
			$(window).on("scroll", function() {
				if($(window).scrollTop()) {
					$('nav').addClass('topnav');
				}
				else {
					$('nav').addClass('topnav');
				}

			})
		</script>
		<meta charset="utf-8" />

		<meta name="viewport" content="width=device-width, initial-scale=1" /> -->

		<!--[if lte IE 8]><script src="assets/js/ie/html5shiv.js"></script><![endif]-->

		<link rel="stylesheet" href="assets/css/main.css" />
		<script src="https://code.jquery.com/jquery-3.3.1.js"></script>

<!--    // </script>-->
        <title>G20 GDP Comparison</title>
        <script src="https://www.gstatic.com/charts/loader.js"></script>
        <script>
            google.charts.load('current', {callback: drawAllSheets, 'packages' : ['corechart', 'geochart', 'table']});
            // google.charts.setOnLoadCallback(drawAllSheets);

            function drawAllSheets() {
                drawSheetName('full-data', 'SELECT B, D', GDPResponseHandler);
                drawSheetName('MilitaryExpenditure(%)', 'SELECT A, B, C, D, E, F, G', MilitarySpendingResponseHandler);
                // drawSheetName('meanmilitaryspending', 'SELECT A,G', averageSpendingResponseHandler);
                // drawSheetName('sharedgdp', 'SELECT A,B, C, D,E,F', sharedGDPResponseHandler);
                // drawSheetName('sharedgdp', 'SELECT A,F', topSharedGDPResponseHandler);
                // drawSheetName('percapita', 'SELECT A,F', topPerCapitaResponseHandler);
                // drawSheetName('percapitagdp', 'SELECT A, P,Q,R,S,T', perCapitaGDPResponseHandler);
                // drawSheetName('annualgrowth', 'SELECT A, G', annualGrowthResponseHandler);
                // drawSheetName('totalgdp', 'SELECT A, F, S', totalGDPMilitarySpendingResponseHandler);
                // drawSheetName('percapitaGDP', 'SELECT A, T, F', perCapitaGDPMilitarySpendingResponseHandler);


            }

            function drawSheetName(sheetName, query, responseHandler) {
                var queryString = encodeURIComponent(query);
                var query = new google.visualization.Query('https://docs.google.com/spreadsheets/d/1XQo2m_AmTBnpPRiUaZOUBOSvo-QR16GH1ibDO5pZtv0/gviz/tq?sheet='+sheetName
                +'&headers=1&tq='+queryString);
                query.send(responseHandler);
            }

            function checkError(response){
                if (response.isError()) {
                    alert('Error in query: ' + response.getMessage() + ' ' + response.getDetailedMessage())
                    return;
                }
            } //checkError

            function GDPResponseHandler(response) {
                checkError(response);
                var data = response.getDataTable();
                data.sort({column: 1, desc: true});

                var options = {
                    vAxis: { title: 'Spending in Billions ($)'},
                    hAxis: {title: 'Country'},
                    legend: { position: 'top', maxLines: 3 },
                    bar: { groupWidth: '75%' },
                    isStacked: true,
                };

                // var table = new google.visualization.Table(document.getElementById('gdp_div'));
                var chart = new google.visualization.GeoChart(document.getElementById('gdp_div'));

                chart.draw(data, options);
                // table.draw(data);
            };

            function MilitarySpendingResponseHandler(response) {
                checkError(response);
                var data = response.getDataTable();
                  
                data.sort({column: 1, desc: true});

                var options = {
                    // vAxis: { title: 'Spending in Billions ($)'},
                    // hAxis: {title: 'Country'},
                    // legend: { position: 'top', maxLines: 3 },
                    // bar: { groupWidth: '75%' },
                    // isStacked: true,
                };

                // var table = new google.visualization.Table(document.getElementById('gdp_div'));
                var chart = new google.visualization.ColumnChart(document.getElementById('military_spending'));

                chart.draw(data, options);
                // table.draw(data);
            }


            // function topMilitarySpendingResponseHandler(response) {
            //     checkError(response);

            //     var data = response.getDataTable();
            //     data.sort({column:1, desc:true});

            //     var options = {
            //         colorAxis: {colors: ['#e7711c', '#4374e0']}, //orange to blue
            //         title: 'Top Countries in Military Spending in 2015 (Billions $)'
            //     };

            

            //     var chart = new google.visualization.GeoChart(document.getElementById('top_military_spending'));
            //     chart.draw(data, options);
            // }

            // function averageSpendingResponseHandler(response){
            //     checkError(response);

            //     var data = response.getDataTable();
            //     var options = {
            //         legend: 'none',
            //         bars: 'horizontal',
            //         vAxis: {title: 'Country'},
            //         hAxis: {title: 'Spending in Billions ($)'}
                

            //     };
            //     // using data directly
            //     // var formatter = new google.visualization.NumberFormat({
            //     //     fractionDigits: 2, prefix: '$'
            //     // });
            //     // formatter.format(data, 1);
            //     // var chart = new google.visualization.BarChart(document.getElementById('avg_military_spending'));
            //     // chart.draw(data, options);

            //     // using a view
            //     var view = new google.visualization.DataView(data);

            //     view.setColumns([0,1, {
            //         calc: function(dt, row) {
            //             return '$'+Math.floor(dt.getFormattedValue(row,1))+'B';
            //         },
            //         sourceColumn: 1,
            //         type: 'string',
            //         role: 'annotation'
                     
            //     }]);
            //     var chart = new google.visualization.BarChart(document.getElementById('avg_military_spending'));
            //     chart.draw(view, options);
            // }

            // function sharedGDPResponseHandler(response){
            //     checkError(response);

            //     var data = response.getDataTable();
            //     data.sort({column:5, desc: true});

            //     var options = {
            //         hAxis: {title:'Country'},
            //         vAxis: {title: ' Military Spending % of GDP'}

            //     };

            //     var chart = new google.visualization.ColumnChart(document.getElementById('shared_gdp'));
            //     chart.draw(data, options);
            // }

            // function topSharedGDPResponseHandler(response){
            //     checkError(response);

            //     var data = response.getDataTable();
            //     data.sort({column:1, desc: true });
            //     var options = {
            //         legend: 'none',
            //         bars: 'horizontal',
            //         // annotations: {alwaysOutside: true},
            //         title: 'Top by Military Expense for 2015 as % of GDP',
            //         vAxis: {title: 'Country'},
            //         hAxis: {title: '%'}

            //     };

            //     // using a view 
            //     var view = new google.visualization.DataView(data);
            //     view.setColumns([0,1, {
            //         calc: function(dt, row) {
            //             return Math.ceil(dt.getFormattedValue(row, 1))+'%';
            //         },
            //         sourceColumn: 1, 
            //         type: 'string',
            //         role: 'annotatiton'
            //     }]);
            //     var chart = new google.visualization.BarChart(document.getElementById('top_gdp_div'));
            //     chart.draw(view, options);
            // } //topSharedGDPResponseHandler

            // function topPerCapitaResponseHandler(response){
            //     checkError(response);

            //     var data = response.getDataTable();
            //     data.sort({column:1, desc: true});

            //     var chart = new google.visualization.ColumnChart(document.getElementById('top_per_capita_div'));
            //     chart.draw(data);
            // } //topPerCapitaResponseHandler


            // function perCapitaGDPResponseHandler(response){
            //     checkError(response);

            //     var data = response.getDataTable();
            //     data.sort({column:5, desc: true});

            //     var options = {
            //         legend: {position: 'top', maxLines: 3},
            //         bar: {groupWidth: '75%'},
            //         isStacked: true,
            //     };

            //     var chart = new google.visualization.ColumnChart(document.getElementById('per_capita_gdp_div'));
            //     chart.draw(data, options);
            // } // perCapitaGDPResponseHandler

            // function annualGrowthResponseHandler(response) {
            //     checkError(response);

            //     var data = response.getDataTable();
            //     data.sort({column:1, desc:true});

            //     var chart = new google.visualization.GeoChart(document.getElementById('annual_growth_div'));
            //     chart.draw(data);
            // } //annualGrowthResponseHandler

            // function totalGDPMilitarySpendingResponseHandler(response) {
            //     checkError(response);

            //     var data = response.getDataTable();
            //     data.sort({column: 1, desc: true});

            //     var options = {

            //         legend: 'none',
            //         bars: 'horizontal',
            //         isStacked: true,
            //         annotation: {alwaysOutside: true},
            //         title: 'Military Spending vs. Total GDP (2015)',
            //         vAxis: { title: 'Country'},
            //         hAxis: {title: 'Spending in Billions ($)'}
            //     };

            //     var chart = new google.visualization.BarChart(document.getElementById('top_gdp_military_spending_div'));
            //     chart.draw(data, options);
            // } //totalGDPMilitarySpendingResponseHandler

            // function perCapitaGDPMilitarySpendingResponseHandler(response) {
            //     checkError(response);

            //     var data = response.getDataTable();
            //     data.sort({column: 1, desc: true});

            //     var options = {

            //         legend: 'none',
            //         bars: 'horizontal',
            //         isStacked: true,
            //         annotation: {alwaysOutside: true},
            //         title: 'Per Capita Military Spending vs. Per Capita GDP (2015)',
            //         vAxis: { title: 'Country'},
            //         hAxis: {title: 'Spending ($)'}
            //     };

            //     var chart = new google.visualization.BarChart(document.getElementById('per_capita_gdp_military_spending_div'));
            //     chart.draw(data, options);
            // } //perCapitaGDPMilitarySpendingResponseHandler

        </script>
    </head>
    
    <body>  
        <h3>GDP Analysis</h3>
        <div id="gdp_div" style="width: 900px; height: 500px;"></div>

        <h3>Top Military Spending over years</h3>
        <div id="military_spending"style="width: 900px; height: 500px;"></div>
        
        <h3>Average Military Spending for 2015</h3>
        <div id="avg_military_spending"style="width: 900px; height: 500px;"></div>

        <h3>Shared GDP Military Spending for 2015</h3>
        <div id="shared_gdp"style="width: 900px; height: 500px;"></div>

        <h3>Top Military Expense for 2015</h3>
        <div id="top_gdp_div"style="width: 900px; height: 500px;"></div>
        
        <h3>Top Military Per Capita Expense</h3>
        <div id="top_per_capita_div"style="width: 900px; height: 500px;"></div>

        <h3>Per Capita GDP</h3>
        <div id="per_capita_gdp_div"style="width: 900px; height: 500px;"></div>

        <h3>Annual Growth</h3>
        <div id="annual_growth_div"style="width: 900px; height: 500px;"></div>

        <br>
        <h3>Total GDP Military Spending</h3>
        <div id="top_gdp_military_spending_div"style="width: 900px; height: 500px;"></div>

        <h3>Per Capita Military Spending</h3>
        <div id="per_capita_gdp_military_spending_div"style="width: 900px; height: 500px;"></div>

        
    </body>
</html>



<!DOCTYPE html>
<html>
  <head>
  <title>Bar Chart with Dropdown JSON</title>
    <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
    
    
  </head>
  <body>
  <form id="form1" name="form1" onchange="drawChart()" >
     
     <select id="thedropdown">
     <option value="Austin">Austin</option>
     <option value="Boulder">Boulder</option>
     </select>
    
  </form>

    <div id="div_chart"></div>
   
    
    <script type="text/javascript">
      google.charts.load("current", {packages:["corechart"]});
      google.charts.setOnLoadCallback(drawChart);
      
       
     
      function drawChart() {
      
      info = [{city: "Austin", gender: "male", work: 40, eat: 8, commute: 2, tv: 3, sleep: 49},
     {city: "Austin", gender: "female", work: 45, eat: 9, commute: 3, tv: 5, sleep: 56},
     {city: "Boulder", gender: "male", work: 50, eat: 7, commute: 5, tv: 8, sleep: 42},
     {city: "Boulder", gender: "female", work: 32, eat: 5, commute: 6, tv: 10, sleep: 42}
     ];
      
      mycity = document.getElementById("thedropdown").value;     
    
     for(i=0; i<info.length; i++) { 
    if(mycity == info[i].city && info[i].gender=="male") {
       workmale = info[i].work;
       eatmale = info[i].eat;
       commutemale = info[i].commute;
       tvmale = info[i].tv;
       sleepmale = info[i].sleep;
    
    }// end if
    
    if(mycity == info[i].city && info[i].gender=="female") {
       workfemale = info[i].work;
       eatfemale = info[i].eat;
       commutefemale = info[i].commute;
       tvfemale = info[i].tv;
       sleepfemale = info[i].sleep;
    
    }// end if
    } // end for
    
        var data = google.visualization.arrayToDataTable([
          ['Element', 'Male', 'Female'],
          ['work', workmale, workfemale],
          ['eat', eatmale, eatfemale],
          ['commute', commutemale, commutefemale],
          ['tv', tvmale, tvfemale],
          ['sleep', sleepmale, sleepfemale]
        ]);

        var options = {
            title: 'Weekly Activities',
        };

        var chart = new google.visualization.BarChart(document.getElementById('div_chart'));

        chart.draw(data, options);
      }
    </script>
  </body>
</html>

